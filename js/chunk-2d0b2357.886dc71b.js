(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b2357"],{"22ab":function(s,t,o){"use strict";o.r(t);var e=function(){var s=this,t=s._self._c;return t("div",{staticClass:"container py-5"},[t("NavTabs"),s.isLoading?t("Spinner"):[t("h1",{staticClass:"mt-5"},[s._v("美食達人")]),t("hr"),t("div",{staticClass:"row text-center"},s._l(s.users,(function(o){return t("div",{key:o.id,staticClass:"col-3"},[t("router-link",{attrs:{to:{name:"user",params:{id:o.id}}}},[t("img",{attrs:{src:o.image,width:"140px",height:"140px"}})]),t("h2",[s._v(s._s(o.name))]),t("span",{staticClass:"badge bg-secondary"},[s._v("追蹤人數："+s._s(o.followerCount))]),t("p",{staticClass:"mt-3"},[o.isFollowed?t("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){return s.unfollowUser(o.id)}}},[s._v(" 取消追蹤 ")]):t("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return s.followUser(o.id)}}},[s._v(" 追蹤 ")])])],1)})),0)]],2)},a=[],r=(o("d9e2"),o("8bb1")),n=o("4cce"),i=o("2fa3"),l=o("2375"),c={name:"users-top",components:{NavTabs:r["a"],Spinner:l["a"]},data(){return{users:[],isLoading:!0}},created(){this.fetchTopUsers()},methods:{async fetchTopUsers(){try{const{data:s}=await n["a"].getTopUsers();this.users=s.users.map(s=>({id:s.id,name:s.name,image:s.image,followerCount:s.FollowerCount,isFollowed:s.isFollowed})),this.isLoading=!1}catch(s){this.isLoading=!1,console.log(s),i["a"].fire({icon:"error",title:"無法取得美食達人資料，請稍後再重試"})}},async followUser(s){try{const{data:t}=await n["a"].addUserFollowing(s);if("success"!==t.status)throw new Error(t.message);this.users=this.users.map(t=>t.id!==s?t:{...t,followerCount:t.followerCount+1,isFollowed:!0})}catch(t){console.log(t),i["a"].fire({icon:"error",title:"無法加入追蹤，請稍後再重試"})}},async unfollowUser(s){try{const{data:t}=await n["a"].deleteUserFollowing(s);if("success"!==t.status)throw new Error(t.message);this.users=this.users.map(t=>t.id!==s?t:{...t,followerCount:t.followerCount-1,isFollowed:!1})}catch(t){console.log(t),i["a"].fire({icon:"error",title:"無法取消追蹤，請稍後再重試"})}}}},u=c,d=o("2877"),w=Object(d["a"])(u,e,a,!1,null,null,null);t["default"]=w.exports}}]);
//# sourceMappingURL=chunk-2d0b2357.886dc71b.js.map